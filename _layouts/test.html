<!doctype html>
<!--[if IE 7]>
<html class="lt-ie10 lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="lt-ie10 lt-ie9"> <![endif]-->
<!--[if IE 9]>
<html class="lt-ie10"> <![endif]-->
<!--[if gt IE 9]><!-->
<html lang="en" xmlns="http://www.w3.org/1999/html"> <!--<![endif]-->
<head>
    <title>Sky Analytics API Test page</title>


    <!--to help prevent 'font flash'-->
    <link href='//web-toolkit.global.sky.com/static/fonts/sky_regular.ttf' rel='prefetch'>
    <link href='//web-toolkit.global.sky.com/static/fonts/sky_regular.svg' rel='prefetch'>
    <link href='//web-toolkit.global.sky.com/static/fonts/sky_medium.ttf' rel='prefetch'>
    <link href='//web-toolkit.global.sky.com/static/fonts/sky_medium.svg' rel='prefetch'>
    <!--end prevent 'font flash'-->


    <link rel="stylesheet" href="http://web-toolkit.global.sky.com/2.1.3/stylesheets/toolkit.css">
    <link rel="stylesheet" href="test/unit/vendor/main.css">
    <link rel="stylesheet" href="./dist/css/wiki.css">
    <!--<link rel="stylesheet" href="http://skyglobal.github.io/web-toolkit/dist/stylesheets/demo.css">-->
    <script src="http://web-toolkit.global.sky.com/static/lib/jquery-2.0.3.js" type="text/javascript"></script>
    <script src="./dist/js/lib/jquery.scrollspy.js" type="text/javascript"></script>
    <link rel="stylesheet" href="test/unit/vendor/mocha.css">

    {% include skycom-resources.html %}

    <!-- Tracking - aka: What you came here for -->

    <script src="test/unit/vendor/mocha.js"></script>
    <script src="test/unit/vendor/chai.js"></script>
    <script src="test/unit/vendor/require.js"></script>




    <script>


        requirejs.config({
            baseUrl: '../../grunt/js/',
            paths: {
                smoax: '../../test/unit/vendor/smoax'
            },
            shim: {
                smoax: {
                    exports: 'Smoax'
                }
            },
            urlArgs: 'v=' + new Date().getTime()
        });

        function objectsEqual(a, b) {
            return JSON.stringify(a) == JSON.stringify(b); // quick way to compare objects for equality
        };

        window.chai = chai;
        window.assert = chai.assert;
        window.expect = chai.expect;
        window.to = chai.to;

        window.objectsEqual = objectsEqual;

        mocha.setup('bdd');
        mocha.setup({ignoreLeaks: true}); //otherwise mocha complains about jquery and moment being globals

        require({baseUrl: 'dist/js', paths: {suite: '../../test/unit/suite', specs: '../../test/unit/specs'}},
                ["analytics"], function (main) {
                    require(["suite"], function (TestLoader) {
                        setTimeout(function(){
//                            window.channelManagerSetup();
                            mocha.run();

                        },2000);
                    });
                });

    </script>

    <script>
       window.channelManagerSetup = function() {
           _analytics = {
               omniture: {
                   getVariable: function(name){
                       debugger;
                       return omniture_s[name];
                   },
                   setVariable: function(name, value){
                       return omniture_s[name] = value;
                   }
               },
               plugins:{utils:{
                   getCookie: function(name){
                       return cookieValue[name];
                   },
                   referredByGoogle: function(){
                       return referredByGoogle;
                   }
               }}
           };
       }
    </script>

</head>
<body class="grid-1140" data-spy="scroll" data-target="#toolkit-menu-tabs">
<div class="skycom-container clearfix">
    <div class="alpha skycom-12">
        <h1 class="demo-header section-title clearfix">
            <img src="http://skyglobal.github.io/web-toolkit/static/images/sky-logo.png" alt="" height="52" width="82">
            <span>Analytics</span>
        </h1>
    </div>
</div>
<div class="skycom-container clearfix">
    <div id="mocha">
    </div>
    <div id="fixture-container"></div>
</div>

{% include _footer.html %}
<script src="http://web-toolkit.global.sky.com/2.1.3/scripts/toolkit.js"></script>
<script src="./dist/js/demo/menu.js"></script>
</body>
</html>
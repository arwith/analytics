<!doctype html>
<!--[if IE 7]>         <html class="lt-ie10 lt-ie9 lt-ie8" > <![endif]-->
<!--[if IE 8]>         <html class="lt-ie10 lt-ie9" > <![endif]-->
<!--[if IE 9]>         <html class="lt-ie10" > <![endif]-->
<!--[if gt IE 9]><!--> <html lang="en" > <!--<![endif]-->
<head>
    <title>Sky Analytics API Demo Page</title>

    <link rel="stylesheet" href="http://web-toolkit.global.sky.com/0.4.8/stylesheets/toolkit.css">
    <link rel="stylesheet" href="./dist/css/wiki.css">
    <script src="http://assets.sky.com/js/lib/jquery-1.9.1.min.js" type="text/javascript"></script>

    <!--[if LT IE 9]>
<link rel='stylesheet' href='//assets.sky.com/css/desktop-12grid.css' media='screen' />
<![endif]-->
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<link rel='stylesheet' href='//assets.sky.com/css/responsive-12grid.css' class='skycom-responsive-css' media='screen and (min-width: 768px)' />
<!--[mobilestart]-->
<link rel='stylesheet' href='//assets.sky.com/css/mobile-12grid.css' class='skycom-mobile-css' media='screen and (max-width: 767px)' />
<!--[mobileend]-->

<link href='//assets.sky.com/images/favicon.png' rel='icon' type='image/png'>
<link href='//assets.sky.com/fonts/sky_regular.ttf' rel='prefetch'>
<link href='//assets.sky.com/fonts/sky_regular.svg' rel='prefetch'>
<link href='//assets.sky.com/fonts/sky_medium.ttf' rel='prefetch'>
<link href='//assets.sky.com/fonts/sky_medium.svg' rel='prefetch'>
<link rel='stylesheet' href='//assets.sky.com/css/css-print.css' media='print' />
<link rel='stylesheet' href='//assets.sky.com/css/app-fonts.css' />
<!--[if IE 6]>
<link rel='stylesheet' href='//assets.sky.com/css/app-ie6.css' />
<![endif]-->
<!--[if IE 7]>
<link rel='stylesheet' href='//assets.sky.com/css/app-ie7.css' />
<![endif]-->
<!--[if LT IE 9]>
<link rel='stylesheet' href='//assets.sky.com/css/app-ielt9.css' />
<![endif]-->
<!--[if IE 9]>
<link rel='stylesheet' href='//assets.sky.com/css/app-ie9.css' />
<![endif]-->
<!--[if LT IE 10]>
<link rel='stylesheet' href='//assets.sky.com/css/app-ielt10.css' />
<![endif]-->
<script id='skycom-view-type'></script>
<script id='skycom-orientation'></script>
<script>
  var globalskycom = globalskycom || {};
  globalskycom.serverHost = 'assets.sky.com';
</script>
<script src='//assets.sky.com/js/app.js'></script>
<script>
  $(function() {
    var i, len,
      messages = globalskycom.emergencyMessages;
    if(messages) {
      for(i = 0, len = messages.length; i < len; i++) {
        new globalskycom.message(messages[i]);
      }
    }
  });
</script>

    <!-- Tracking - aka: What you came here for -->
    <script type='text/javascript' src="./dist/js/analytics.js"></script>
</head>
<body>

<div class='grid-1140'>

    <div class="quick-links">
        <div class="skycom_container">
            <ul class="nav-pills alpha skycom_12">
                <li><a href="/#using-me">Using the Analytics</a></li>
                <li><a href="/#tracking-clicks">Tracking Clicks</a></li>
                <li><a href="/#tracking-searches">Tracking Searches</a></li>
                <li><a href="/#custom-vars">Custom Variables</a></li>
                <li><a href="/#custom-events">Custom Events</a></li>
                <li><a href="/#manual">Manual Trigger</a></li>
                <li><a href="/#single-page-apps">Single Page Apps</a></li>
            </ul>
        </div>
    </div>
    <div class="skycom-container clearfix">
        <div class="alpha skycom-12">
            <h1 class="wiki-header">Omniture Analytics <small>v0.6.0</small></h1>

<section class="wiki-section">
    <a name="using-me"></a>
    <h2>Using the Analytics</h2>
    <p class="developer-notes">
        Please use the following:
        <code class="block">    &lt;script src=http://analytics.global.sky.com/0.6.0/analytics.js>&lt;/script></code>
        OR
        <a href="require-js.html">Click here to see requireJS working</a>.
    </p>
    <a name="contributing"></a>
    <div class="sub-section">
        <h3 class="wiki-h3">Contributing</h3>
<p >
    The source code is available in a private repository on Github, along with instructions for building/running the project locally.  Please fork it from here:
    <a href="https://github.com/skyglobal/analytics/">https://github.com/skyglobal/analytics/</a>
</p>

<dl class="clearfix ">
    <dt class="skycom_4 alpha">Feature Requests</dt>
    <dd class="skycom_8">Please check <a href="https://github.com/skyglobal/analytics/issues">here</a> to see if there is already a similar request. If not, create a New
        Issue and flag it as an '<code>enhancement</code>'</dd>
    <dt class="skycom_4 alpha">Bug Reporting</dt>
    <dd class="skycom_8">Please check <a href="https://github.com/skyglobal/analytics/issues">here</a> to see if there is already a similar request. If not, create a New
        Issue and flag it as a '<code>bug</code>'</dd>
</dl>
    </div>
    <a name="getting-started"></a>
    <div class="sub-section">
        <h3 class="wiki-h3">Getting Started</h3>
<p> Once tracking has been initialised,
    <code>anchors</code>, <code>buttons</code>, <code>submits</code> and any element with <code>[data-tracking]</code> are automatically tracking.
    You Can also manually trigger tracking using JS.
</p>

<h4>Initialising</h4>
<p>The are a number of details that needs to be passed to the tracking code, which should be passed through as a single object.  Please get the applicable details for your project from <code>implementation@bskyb.com</code>.</p>
<p>The following can be added to the <code>config</code> object:</p>

<dl class="clearfix ">
    <dt class="skycom_4 alpha">site</dt>
    <dd class="skycom_8">[mandatory] --- desciption here ---</dd>
    <dt class="skycom_4 alpha">section</dt>
    <dd class="skycom_8">[mandatory] --- desciption here ---</dd>
    <dt class="skycom_4 alpha">account</dt>
    <dd class="skycom_8">[mandatory] --- desciption here ---</dd>
    <dt class="skycom_4 alpha">page</dt>
    <dd class="skycom_8">[mandatory] --- desciption here ---</dd>
    <dt class="skycom_4 alpha">headline</dt>
    <dd class="skycom_8">[optional] --- desciption here ---</dd>
    <dt class="skycom_4 alpha">contentType</dt>
    <dd class="skycom_8">[optional] --- desciption here ---</dd>
    <dt class="skycom_4 alpha">contentId</dt>
    <dd class="skycom_8">[optional] --- desciption here ---</dd>
    <dt class="skycom_4 alpha">debug</dt>
    <dd class="skycom_8">[optional] [true|false]. Turn on debug on page load to capture the page view event</dd>
    <dt class="skycom_4 alpha">customVariables</dt>
    <dd class="skycom_8">[optional] An object used to add your own tracking variable mapped to an Omniture id. <a href="#custom-vars">details here >></a></dd>
    <dt class="skycom_4 alpha">customEvents</dt>
    <dd class="skycom_8">[optional] An object used to add your own tracking event mapped to an Omniture id. <a href="#custom-events">details here >></a></dd>
</dl>

<p>Then you must tell the code to either add a pageView:
    <code >    analytics.pageView(config); </code>
</p>

<h4>Debugging</h4>
<p>Outside of the config, you can easily execute the following after the page has loaded to start debugging:
    <code class="block">    toolking.tracking.debug(<i>[true|false]</i>);</code>
    <a href="debug-on-load.html">Click here to see debug on load</a> in action.
</p>

<h4>Example config</h4>
<code class="block">    analytics.pageView({
        site: 'global',
        section: 'skyglobal/analytics',
        account: 'bskybdemodev',
        page: 'Analytics demo page',
        customEvents: [
            {'magic_happened': {event: 101}}
        ],
        customVariables: [
            {'drink': {'eVar': 72}},
        ],
        debug: true
    });
</code>
    </div>
</section>


<a name="tracking-clicks"></a>
<section class="wiki-section">
    <h2>Tracking Clicks</h2>
<p>
    Pages are commonly split up in the following areas: Modules, Pods and other.
    You may also want to track Editorial-Themes or the Context along with clicked text.
</p>
<h3 class="wiki-h3">Basic tracking info</h3>
<p>By default we automatically track the <code>text</code> that is clicked along with the <code>site</code> name.  In order of priority, we track: data-tracking-label, alt, value, name, or lastly the text.
</p>
<h3 class="wiki-h3">Optional tracking Attributes</h3>
<p>
    Add the following <code>data</code> attributes to the relevant containers within your page.
    When an element is clicked, the JS will traverse up the DOM looking for these attributes.
</p>
<dl class="clearfix">
    <dt class="skycom_4 alpha">data-tracking-module</dt>
    <dd class="skycom_8">Add this to a top-level container.
        <br/>This defines a distinct horizontal band on a page.
        <br /> eg. <code>data-tracking-module=carousel</code>
    </dd>
    <dt class="skycom_4 alpha">data-tracking-pod</dt>
    <dd class="skycom_8">Add this to a mid-level container.
        <br/>This commonly defines a vertical band within the module or a segment of content.
        <br /> eg. <code>data-tracking-pod=slide2</code></dd>
    <dt class="skycom_4 alpha">data-tracking-other</dt>
    <dd class="skycom_8">Add this to a Low level container.
        <br/> This might be useful for multi-level navigation.
        <br/> eg. <code>data-tracking-other=subnav-text</code></dd>
    <dt class="skycom_4 alpha">data-tracking-theme</dt>
    <dd class="skycom_8">Add this to the element being clicked or a container.
        <br> Used to group items or related links that may be across modules.
        <br /> eg. <code>data-tracking-theme=friends-and-family</code></dd>
    <dt class="skycom_4 alpha">data-tracking-context <br>... or ... data-tracking-context-id</dt>
    <dd class="skycom_8">Add this to the element being clicked.
        <br/>Useful when multiple links have the same text, you may need more context around the link i.e. 'remote record' may need the context of what is being recorded
        <br/> eg. <code>data-tracking-context=bond-11</code> or <code>data-tracking-context-id=search-box</code></dd>
    <dt class="skycom_4 alpha">data-tracking-label</dt>
    <dd class="skycom_8">Add this to the element being clicked
        <br/>A text alternative. Useful when the text clicked may be too long or non-unique.
        <br/> eg. <code>data-tracking-label=bond-remote-record</code></dd>
    <dt class="skycom_4 alpha">data-tracking-search</dt>
    <dd class="skycom_8">Add this to the button/link that triggers the search.
        <br/>Must be used with <code>data-tracking-context-id</code>.
        <br/> eg. <code>data-tracking-search=weather data-tracking-context-id=search-box</code></dd>
    <dt class="skycom_4 alpha">data-tracking</dt>
    <dd class="skycom_8">Add this to an element you do/dont want tracked
        <br/>A way to force tracking of an element or to stop the tracking of an element.
        <br/> eg. <code>data-tracking=false</code></dd>
</dl>

<h3 class="wiki-h3" data-tracking="false">Examples</h3>
<p>Execute <code>analytics.debug()</code> and click around below.</p>
<div class='example clearfix'>

    <div class="skycom_4 alpha">
        <a href="#!">Standard link</a>
    </div>
    <div class="skycom_8">
        'a' tags will be tracked automatically
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <code class="skycom-9 html">    &lt;a href='#' >link&lt;/a>    </code>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>


    <div class='skycom_4 alpha skycom_clear'>
        <button class="btn sign-post">Normal Button</button>
    </div>
    <div class="skycom_8">
        'button' tags will be tracked automatically
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <code class="skycom-9 html">    &lt;button>Button&lt;/button>    </code>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>


    <div class='skycom_4 alpha skycom_clear'>
        <input type="submit" value="Submit Button"/>
    </div>
    <div class="skycom_8">
        'input' tags with type=submit will be tracked automatically
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <code class="skycom-9 html">    &lt;input type="submit" value="Submit"/>    </code>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>

    <div class="skycom_4 alpha">
        <span data-tracking id='a-non-anchor'>Tracking everything else</span>
    </div>
    <div class="skycom_8">
        the attribute 'data-tracking' needs to be added to any other tags you wish to track
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <code class="skycom-9 html">    &lt;span data-tracking >Span&lt;/span>    </code>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>


    <div class='skycom_4 alpha'>
        <a class='btn primary-cta' data-tracking-label='label-text' href="http://sky.com">Link tracked with different text</a>
    </div>
    <div class="skycom_8">
        By adding 'data-tracking-label' you can change the text that is tracked.
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <code class="skycom-9 html">    &lt;a data-tracking-label='label-text' href="#">Link&lt;/a></code>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>


    <div class="skycom_4 alpha">
        <div >
            <a href="#!"  data-tracking-context='context'>Similar CTA's, different actions</a>
        </div>
        <div >
            <a href="#!">Similar CTA's, different actions</a>
        </div>
    </div>
    <div class="skycom_8">
        By adding 'data-tracking-context' you can differentiate between 2 CTA's that do different things. E.g. Remote Record buttons that record different programmes.
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <div class="skycom-9"><code class="block html">&lt;a href="#" data-tracking-context='Sky News'>Record&lt;/a>
&lt;a href="#" data-tracking-context='Sky Sports'>Record&lt;/a></code>
    </div>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>


    <div class="skycom_4 alpha" data-tracking-module=testing>
        <div data-tracking-pod=pod-1>
            <a href="#!">Same module, pod 1</a>
        </div>
        <div data-tracking-pod=pod-2>
            <a href="#!">Same module, pod 2</a>
        </div>
    </div>
    <div class="skycom_8">
        By adding 'data-tracking-pod' and 'data-tracking-module' you can provide more information about where in the page links are located.
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <div class="skycom-9"><code class="block html">&lt;div data-tracking-module=testing>
    &lt;div data-tracking-pod=pod-1>
        &lt;a href="#!" >pod 1&lt;/a>
    &lt;/div>
    &lt;div data-tracking-pod=pod-2>
        &lt;a href="#!">pod 2&lt;/a>
    &lt;/div>
&lt;/div></code></div>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>


    <div class="skycom_4 alpha" >
        <div data-tracking-other=js-off-link>
            <a href="#!">Tracking further info</a>
        </div>
        <div data-tracking-theme=editorial-promo-winter>
            <a href="#!">Tracking themes</a>
        </div>
    </div>
    <div class="skycom_8">
        'data-tracking-other' can be used to track any other useful info, i.e. when navigation gets past 2 levels.<br/>
        'data-tracking-theme' can be used to allow editors monitor page elements that are related over time.
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <div class="skycom-9"><code class="block html">&lt;div data-tracking-module=testing>
    &lt;div data-tracking-other=js-off-link>
        &lt;a href="#!" >Other info&lt;/a>
    &lt;/div>
    &lt;div data-tracking-theme=editorial-promo-winter>
        &lt;a href="#!">Themes&lt;/a>
    &lt;/div>
&lt;/div></code></div>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>


    <div class='skycom_4 alpha'>
        <a data-tracking="false" href="#!" id="anchor-not-tracked">Standard link, not tracked</a>
        <button class="btn" data-tracking="false" id="button-not-tracked" >Normal button, not tracked</button>
        <input type=submit data-tracking="false" value="Submit button, not tracked" id="submit-not-tracked" />
    </div>
    <div class="skycom_8">
        By adding 'data-tracking=false' you can stop any element from tracked automatically.
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <code class="skycom-9 html">&lt;a data-tracking=false href="#">link&lt;/a></code>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>

</div>
</section>
<a name="tracking-searches"></a>
<section class="wiki-section">
    <h2>Search Tracking</h2>
<p>
    Search events and variables can be tracked automatically if you add the correct <code>data-</code> attributes into the HTML.
</p>

<h3 class="wiki-h3">Examples</h3>
<p>Execute <code>analytics.debug()</code> and click around below.</p>
<div class='example clearfix'>

    <div class='skycom_4 alpha skycom_clear sky-form'>
        <input id="weather-search" type="text" placeholder="Postcode or town">
        <button class="btn" type="submit" data-tracking-search="weather" data-tracking-context-id="weather-search">Search</button>
    </div>
    <div class="skycom_8">
        Using 'data-tracking-search' with 'data-tracking-context-id' will activate the Omniture Search Variables.
    </div>
    <code class="skycom-2 alpha html">HTML</code>
    <div class="skycom-9 ">
        <code class="block html">&lt;input id="search" type="text" placeholder="Postcode or town">
&lt;button data-tracking-search="weather" data-tracking-context-id="search">Search&lt;/button></code>
    </div>
    <code class="skycom-2 alpha js">Javascript</code>
    <div class="skycom-9 js"><i>none</i></div>
</div>
</section>

<a name="custom-vars"></a>
<section class="wiki-section">
    <h2>Custom Variables</h2>
<p>
    You will need variable Name and Omniture ID. These should be added to the tracking config on initialisation.
</p>
<code class="block">    var config = {
        ...
        customVariables: [
            {'myCustomVar': <i>customConfig</i>}
        ]
    };
    analytics.pageView(config);
</code>

<p>The <code>customConfig</code> object options are</p>
<dl class="clearfix ">
    <dt class="skycom_4 alpha">var</dt>
    <dd class="skycom_8">[int] Omniture Variable Id. Needed for xxx type reporting</dd>
    <dt class="skycom_4 alpha">prop</dt>
    <dd class="skycom_8">[int] Omniture Prop Id.Needed for xxx type reporting</dd>
    <dt class="skycom_4 alpha">onPageLoad</dt>
    <dd class="skycom_8">[boolean] Set if the variable should be sent on 'pageView'</dd>
    <dt class="skycom_4 alpha">value</dt>
    <dd class="skycom_8">[string] Should be set if <code>onPageLoad</code> is set</dd>
</dl>

<p>
    To get a value to go with your variable, you must bind it to an HTML element using the attribute
    <code>data-tracking-variable</code> and setting it to your variable name.  This element also needs the attribute
    <code>data-tracking-value</code> so we know what to send to Omniture.
    If this attribute is omitted, the value of the item clicked will be tracked.
</p>

<h3 class="wiki-h3">Tracking <code>drink</code> and setting the value to a text box</h3>
<div class="skycom_4 alpha">
    <form id='text-input' class="sky-form">
        <label for='input_field'>What is your favourite drink?</label> <br>
        <input id='input_field' name='input_field' type='text' /><br>
        <button data-tracking-variable='drink' data-tracking-value=""  class='btn primary-cta'>Submit</button>
    </form>
</div>
<div class="skycom_8">
    <code class="block">&lt;label for='input_field'>What is your favourite drink?&lt;/label>
&lt;input id='input_field' name='input_field' type='text' />
&lt;button data-tracking-variable='drink' data-tracking-value="" class='btn primary-cta'>Submit&lt;/button>
&lt;script>//script to update data-tracking-value attribute
$('[data-tracking-variable=drink]').attr('data-tracking-value',$('#input_field').val());
&lt;/script></code>
</div>

<h3 class="wiki-h3 skycom-clear">Tracking <code>how_about_pina_coladas</code> and setting it to the selected radio button</h3>
<div class="skycom_4 alpha">
    <form id='radio-input' class="sky-form">
        <label>Do you like Pina Coldas?</label> <br>
        <input id='radio_yes' checked name='radio_field' type='radio' value='yes_to_pinas'/><label for='radio_yes'>Yes</label>
        <input id='radio_no' name='radio_field' type='radio' value='no_to_pinas'/><label for='radio_no'>No</label>
        <br>
        <button data-tracking-variable='how_about_pina_coladas' data-tracking-value="" class='btn primary-cta'>Submit</button>
    </form>
</div>
<div class="skycom_8">

    <code class="block">&lt;label>Do you like Pina Coldas?&lt;/label>
&lt;input id='radio_yes' name='radio_field' type='radio' value='yes_to_pinas'/>
&lt;label for='radio_yes'>Yes&lt;/label>
&lt;input id='radio_no' name='radio_field' type='radio' value='no_to_pinas'/>
&lt;label for='radio_no'>No&lt;/label>
&lt;button data-tracking-variable='how_about_pina_coladas' class='btn primary-cta'>Submit&lt;/button>
&lt;script>//script to update data-tracking-value attribute
$('[data-tracking-variable=how_about_pina_coladas]').attr(
    'data-tracking-value',
    $('input[name=radio_field]:checked').val()
);
&lt;/script></code>
</div>

<h3 class="wiki-h3 skycom-clear">Tracking <code>colour</code> and setting it to the value of the button clicked</h3>
<div class="skycom_4 alpha">
    <button id='colour-button-blue' data-tracking-variable="colour" class="btn">Blue</button>
    <button id='colour-button-secondary' data-tracking-variable="colour" class="btn secondary">Gray</button>
</div>
<div class="skycom_8">
    <code class="block">&lt;button  data-tracking-variable="colour">Blue&lt;/button>
&lt;button data-tracking-variable="colour">Gray&lt;/button></code>
</div>
<script type='text/javascript'>
    $(document).ready(function(){
        $('[data-tracking-variable=how_about_pina_coladas]').attr('data-tracking-value',$('input[name=radio_field]:checked').val());
        $('[data-tracking-variable=drink]').attr('data-tracking-value',$('#input_field').val());
        $('#input_field').on('blur', function(e){
            $('[data-tracking-variable=drink]').attr('data-tracking-value',$(this).val());
        });
        $('#radio-input input').on('click', function(e){
            $('[data-tracking-variable=how_about_pina_coladas]').attr('data-tracking-value',$(this).val());
        });
        $('#text-input button, #radio-input button').on('click', function(e){
            e.preventDefault();
        });
    });
</script>
</section>

<a name="custom-events"></a>
<section class=wiki-section>
    <h2>Custom Events</h2>
<p>
    An array of 'Custom Events' can be added to the analytics <code>config</code> on initialisation..
</p>

<p>The Custom Events array will contain an object with the following options:</p>
<dl class="clearfix ">
    <dt class="skycom_4 alpha">event name</dt>
    <dd class="skycom_8">[string] Event alias</dd>
    <dt class="skycom_4 alpha">event</dt>
    <dd class="skycom_8">[int] Omniture Event Id</dd>
    <dt class="skycom_4 alpha">onPageLoad</dt>
    <dd class="skycom_8">[boolean] Set if the event should be passed to Omniture when the page loads</dd>
</dl>

<h3 class="wiki-h3">Sending the Event when a link is clicked</h3>
<div class="skycom-4 alpha">
    <a class='btn in-page-cta' href='#!' id='btn_custom_event' data-tracking-event='magic_happened'>Custom Event</a>
</div>
<p class="skycom-8">Add <code>data-tracking-event=<i>eventName</i></code> to the relevant element.</p>
<code class="skycom-2 alpha">HTML</code>
<code class="skycom-9">    &lt;a href='#' data-tracking-event='magic_happened'>Custom Event&lt;/a>
</code>
<code class="skycom-2 alpha">Javascript</code>
<div class="skycom-9">
    <code class=" block">    var config = {
        ...
        customEvents: [
            {'magic_happened': {event: 101}}
        ]
    };
    analytics.pageView(config);
    </code>
</div>


<h3 class="wiki-h3">Sending the Event when the page is viewed</h3>
<div class="skycom-4 alpha">
    <a class='btn in-page-cta' href='custom-page-load.html' id='btn_page_load'>Custom Page Load</a>
</div>
<p class="skycom-8">Add <code>onPageLoad: true</code> in the config.</p>

<code class="skycom-2 alpha">HTML</code>
<code class="skycom-9">    <i>none</i>
</code>
<code class="skycom-2 alpha">Javascript</code>
        <div class="skycom-9">
<code class=" block">    var config = {
        ...
        customEvents: [
            {'magic_happened': {event: 101, onPageLoad: true}}
        ]
    };
    analytics.pageView(config);
</code>
        </div>
</section>

<a name="manual"></a>
<section class=wiki-section>
    <h2>Manually Trigger Tracking</h2>
<p>
    You can trigger tracking any time in JS using the following.
    The tracking event will trigger as if the user had clicked the element themselves.
</p>
<code class="block">$('.element').trigger('analytics.track');</code>

<div class="skycom_12 alpha">
    <a class='btn in-page-cta' href='#!' id='manualTrackNotDouble'>Anchor not being double tracked</a>
    <span class='btn in-page-cta' href='#!' id='manualTrack'>Span manually tracked by JS</span>
    <a class='btn in-page-cta' data-tracking=false href='#!' id='manualTrackingOff'>Anchor being tracked with JS</a>
</div>
<script>
    $('#manualTrackingOff').on('click', function(){
       $(this).trigger('analytics-track');
    });
    $('#manualTrack').on('click', function(){
       $(this).trigger('analytics-track');
    });
    $('#manualTrackNotDouble').on('click', function(){
       $(this).trigger('analytics-track');
    });
</script>
</section>

<a name="single-page-apps"></a>
<section class=wiki-section>
    <h2>Single Page Apps</h2>
<p>Simulate a page load event for sites that make use of ajax by calling:</p>
<code class="block">analytics.pageView(config);</code>
<h3>Example</h3>
<a class='btn in-page-cta' href='#' id='btn_ajax_event' data-tracking="false">Ajax Event</a>
<script type='text/javascript'>
    $('body').on('click', '#btn_ajax_event', function(e){
        e.preventDefault();
        analytics.pageView({
            site: 'mysky',
            section: 'skyglobal/analytics',
            account: 'bskybmyaccountdev',
            page: 'Analytics demo page',
            customEvents: [
                {'ajax_happened': {event: 101, onPageLoad: true}}
            ],
            customVariables: [
                {'colour': {var: 71 }},
                {'drink': {'var': 72 }},
                {'how_about_pina_coladas': {'var': 73 }}
            ]
        });
    });
</script>
</section>
<script type="text/javascript" charset="utf-8">

    //todo: explain when to use
//    headline: '',
//    contentType: '',
//    contentId: '',
    analytics.pageView({
        site: 'global', //todo:mandatory. docs note this should not have sky/portal
        section: 'skyglobal/analytics', //todo:mandatory. docs note this should not start or end with /
        account: 'bskybglobaldev', //todo: mandatory
        page: 'Analytics demo page', //todo: mandatory
        customEvents: [
            {'magic_happened': {event: 101}}
        ],
        customVariables: [
            {'colour': {'eVar': 71}},
            {'drink': {'eVar': 72}},
            {'how_about_pina_coladas': {'eVar': 73}},
        ]
    });
</script>
        </div>
    </div>
    <!--<script src="dist/scripts/lib/require.js" data-main='dist/scripts/wiki'></script>-->
</div>
</body>
</html>